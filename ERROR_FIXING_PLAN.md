# –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ InvoiceGemini

## üìã –û–±–∑–æ—Ä –ø–ª–∞–Ω–∞

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –ø—Ä–æ–µ–∫—Ç–µ InvoiceGemini. –ü–ª–∞–Ω —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ —ç—Ç–∞–ø—ã –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ ‚Üí –≤—ã—Å–æ–∫–∏–µ ‚Üí —Å—Ä–µ–¥–Ω–∏–µ ‚Üí –Ω–∏–∑–∫–∏–µ.

**–û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~15-20 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π  
**–ö–æ–º–∞–Ω–¥–∞**: 1-2 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞  
**–ü–æ–¥—Ö–æ–¥**: –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

---

## üî¥ –≠–¢–ê–ü 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–û–ß–ù–û)
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 5-7 –¥–Ω–µ–π  
**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è

### 1.1 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª—ã—Ö except –±–ª–æ–∫–æ–≤
**–í—Ä–µ–º—è**: 3 –¥–Ω—è  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è

#### –§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):

**–î–µ–Ω—å 1:**
- [ ] `main.py` (—Å—Ç—Ä–æ–∫–∞ 27)
- [ ] `app/utils.py` (—Å—Ç—Ä–æ–∫–∞ 113)
- [ ] `main_refactored.py` (—Å—Ç—Ä–æ–∫–∞ 25)
- [ ] `main_original_backup.py` (—Å—Ç—Ä–æ–∫–∞ 26)

**–î–µ–Ω—å 2:**
- [ ] `app/training_dialog.py` (20 —Å–ª—É—á–∞–µ–≤)
  - –°—Ç—Ä–æ–∫–∏: 94, 148, 185, 191, 218, 224, 269, 275, 299, 354, 2355, 3158, 3213, 3300, 3307, 3657, 4206, 4709, 4820
- [ ] `app/plugins/base_llm_plugin.py` (—Å—Ç—Ä–æ–∫–∏ 377, 505)

**–î–µ–Ω—å 3:**
- [ ] `app/training/` –º–æ–¥—É–ª–∏ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª—É—á–∞–∏)
- [ ] `app/ui/` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] `app/processing/` –º–æ–¥—É–ª–∏

#### –®–∞–±–ª–æ–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```python
# ‚ùå –ë–´–õ–û
try:
    risky_operation()
except:
    pass

# ‚úÖ –°–¢–ê–õ–û  
try:
    risky_operation()
except (SpecificException1, SpecificException2) as e:
    logger.warning(f"–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏: {e}")
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–ª–∏ fallback –ª–æ–≥–∏–∫–∞
```

#### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –∑–∞–º–µ–Ω—ã:
- **–§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: `(OSError, FileNotFoundError, PermissionError)`
- **–°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: `(requests.RequestException, ConnectionError, TimeoutError)`
- **Subprocess**: `(subprocess.SubprocessError, OSError, FileNotFoundError)`
- **Import –æ–ø–µ—Ä–∞—Ü–∏–∏**: `(ImportError, ModuleNotFoundError)`
- **JSON –ø–∞—Ä—Å–∏–Ω–≥**: `(json.JSONDecodeError, ValueError, TypeError)`
- **PyQt –æ–ø–µ—Ä–∞—Ü–∏–∏**: `(RuntimeError, AttributeError)`

### 1.2 –ê—É–¥–∏—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ QThread –∫–ª–∞—Å—Å–æ–≤
**–í—Ä–µ–º—è**: 2 –¥–Ω—è  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è

#### –°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. [ ] `ProcessingThread` (app/threads.py)
2. [ ] `ModelDownloadThread` (app/threads.py)  
3. [ ] `TesseractCheckThread` (app/threads.py)
4. [ ] `BatchProcessingThread` (app/ui/components/batch_processor.py)
5. [ ] `OptimizedProcessingThread` (app/processing/optimized_file_processor.py)
6. [ ] `ModelComparisonThread` (app/processing/model_comparison.py)
7. [ ] `LLMLoadingThread` (app/main_window.py)
8. [ ] `TrainingThread` (app/ui/plugins_dialog.py)
9. [ ] `DatasetGenerationThread` (app/ui/plugins_dialog.py)
10. [ ] `LLMProviderTestThread` (app/ui/llm_providers_dialog.py)
11. [ ] `ModelRefreshThread` (app/ui/llm_providers_dialog.py)

#### –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞:
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ `super().__init__()`
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `self.requestInterruption()`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `deleteLater()` –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- [ ] –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ UI –∏–∑ `run()`
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ `run()`
- [ ] –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ

#### –®–∞–±–ª–æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ QThread:
```python
class CorrectThread(QThread):
    # –°–∏–≥–Ω–∞–ª—ã –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
    progress = pyqtSignal(int)
    finished = pyqtSignal(object)
    error = pyqtSignal(str)
    
    def __init__(self, parent=None):
        super().__init__(parent)
        self.should_stop = False
    
    def run(self):
        try:
            # –†–∞–±–æ—á–∞—è –ª–æ–≥–∏–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –Ω–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ
            while not self.should_stop and not self.isInterruptionRequested():
                # –†–∞–±–æ—Ç–∞...
                self.progress.emit(progress_value)
                
            if not self.should_stop:
                self.finished.emit(result)
        except Exception as e:
            self.error.emit(str(e))
    
    def stop(self):
        self.should_stop = True
        self.requestInterruption()
        
    def cleanup(self):
        # –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
        pass
```

### 1.3 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
**–í—Ä–µ–º—è**: 1-2 –¥–Ω—è  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è

#### –ó–∞–¥–∞—á–∏:
- [ ] –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å `print()` –Ω–∞ `logger` –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```python
# app/core/logging_config.py
import logging
import logging.handlers
from pathlib import Path

def setup_logger(name: str, level: int = logging.INFO) -> logging.Logger:
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è –º–æ–¥—É–ª—è."""
    logger = logging.getLogger(name)
    
    if not logger.handlers:
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        formatter = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(funcName)s:%(lineno)d - %(message)s'
        )
        
        # File handler —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
        log_dir = Path("logs")
        log_dir.mkdir(exist_ok=True)
        
        file_handler = logging.handlers.RotatingFileHandler(
            log_dir / f"{name}.log",
            maxBytes=10*1024*1024,  # 10MB
            backupCount=5
        )
        file_handler.setFormatter(formatter)
        file_handler.setLevel(logging.DEBUG)
        
        # Console handler
        console_handler = logging.StreamHandler()
        console_handler.setFormatter(formatter)
        console_handler.setLevel(level)
        
        logger.addHandler(file_handler)
        logger.addHandler(console_handler)
        logger.setLevel(logging.DEBUG)
    
    return logger
```

---

## üü° –≠–¢–ê–ü 2: –í—ã—Å–æ–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 4-5 –¥–Ω–µ–π  

### 2.1 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
**–í—Ä–µ–º—è**: 3 –¥–Ω—è  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞

#### –§–∞–π–ª—ã –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:
**–î–µ–Ω—å 1:**
- [ ] `app/main_window.py` - –æ—Å–Ω–æ–≤–Ω–æ–µ –æ–∫–Ω–æ
- [ ] `app/settings_dialog.py` - –¥–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] `app/training_dialog.py` - –¥–∏–∞–ª–æ–≥ –æ–±—É—á–µ–Ω–∏—è

**–î–µ–Ω—å 2:**
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã –≤ `app/ui/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ `app/utils.py`
- [ ] –ü–ª–∞–≥–∏–Ω—ã –≤ `app/plugins/`

**–î–µ–Ω—å 3:**
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ `.ts`
- [ ] –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ `.qm` —Ñ–∞–π–ª—ã
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### –®–∞–±–ª–æ–Ω –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:
```python
# ‚ùå –ë–´–õ–û
self.setWindowTitle("–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—á–µ—Ç–æ–≤")
QMessageBox.critical(self, "–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª")

# ‚úÖ –°–¢–ê–õ–û
self.setWindowTitle(self.tr("–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—á–µ—Ç–æ–≤"))
QMessageBox.critical(self, self.tr("–û—à–∏–±–∫–∞"), self.tr("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª"))
```

### 2.2 –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
**–í—Ä–µ–º—è**: 2 –¥–Ω—è  

#### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:
```python
# app/core/error_handler.py
class ErrorHandler:
    """–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫."""
    
    @staticmethod
    def handle_file_error(e: Exception, file_path: str, logger) -> str:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π."""
        if isinstance(e, FileNotFoundError):
            msg = f"–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: {file_path}"
        elif isinstance(e, PermissionError):
            msg = f"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É: {file_path}"
        elif isinstance(e, OSError):
            msg = f"–û—à–∏–±–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã: {e}"
        else:
            msg = f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–æ–º {file_path}: {e}"
        
        logger.error(msg)
        return msg
    
    @staticmethod
    def handle_network_error(e: Exception, url: str, logger) -> str:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫."""
        # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
        pass
```

### 2.3 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Type Hints
**–í—Ä–µ–º—è**: 1 –¥–µ–Ω—å  

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã:
- [ ] `app/main_window.py`
- [ ] `app/processing_engine.py`
- [ ] `app/plugins/base_llm_plugin.py`
- [ ] –í—Å–µ –Ω–æ–≤—ã–µ –∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã

---

## üü¢ –≠–¢–ê–ü 3: –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 3-4 –¥–Ω—è  

### 3.1 –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
**–í—Ä–µ–º—è**: 1 –¥–µ–Ω—å  

#### –§–∞–π–ª—ã –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- [ ] `app/ui/export_template_designer.py` (4 —Å–ª—É—á–∞—è)
- [ ] `app/training/trainer.py` (1 —Å–ª—É—á–∞–π)
- [ ] `app/core/thread_safe_manager.py` (1 —Å–ª—É—á–∞–π)

#### –®–∞–±–ª–æ–Ω —É–ø—Ä–æ—â–µ–Ω–∏—è:
```python
# ‚ùå –ë–´–õ–û
if hasattr(self, 'template_combo') and self.template_combo is not None:

# ‚úÖ –°–¢–ê–õ–û  
if hasattr(self, 'template_combo') and self.template_combo:
```

### 3.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
**–í—Ä–µ–º—è**: 2 –¥–Ω—è  

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. [ ] –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤
2. [ ] –°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –≤ processing –º–æ–¥—É–ª—è—Ö
3. [ ] API –º–µ—Ç–æ–¥—ã –ø–ª–∞–≥–∏–Ω–æ–≤
4. [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 3.3 –û—á–∏—Å—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞
**–í—Ä–µ–º—è**: 1 –¥–µ–Ω—å  

---

## üîµ –≠–¢–ê–ü 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô)
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 2-3 –¥–Ω—è  

### 4.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
**–í—Ä–µ–º—è**: 1 –¥–µ–Ω—å  

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pre-commit hooks:
```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.0.0
    hooks:
      - id: black
        language_version: python3.9
  
  - repo: https://github.com/pycqa/flake8
    rev: 6.0.0
    hooks:
      - id: flake8
        args: [--max-line-length=100, --ignore=E203,W503]
  
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.5.0
    hooks:
      - id: mypy
        additional_dependencies: [types-all]
```

### 4.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
**–í—Ä–µ–º—è**: 2 –¥–Ω—è  

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
```
tests/
‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ test_utils.py
‚îÇ   ‚îú‚îÄ‚îÄ test_processing_engine.py
‚îÇ   ‚îî‚îÄ‚îÄ test_plugins.py
‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îú‚îÄ‚îÄ test_main_window.py
‚îÇ   ‚îî‚îÄ‚îÄ test_batch_processing.py
‚îî‚îÄ‚îÄ fixtures/
    ‚îú‚îÄ‚îÄ test_images/
    ‚îî‚îÄ‚îÄ test_data.json
```

---

## üìÖ –í—Ä–µ–º–µ–Ω–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ù–µ–¥–µ–ª—è 1 (–î–Ω–∏ 1-5): –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–î–µ–Ω—å 1-3**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª—ã—Ö except –±–ª–æ–∫–æ–≤
- **–î–µ–Ω—å 4-5**: –ê—É–¥–∏—Ç QThread –∫–ª–∞—Å—Å–æ–≤

### –ù–µ–¥–µ–ª—è 2 (–î–Ω–∏ 6-10): –í—ã—Å–æ–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã  
- **–î–µ–Ω—å 6-7**: –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **–î–µ–Ω—å 8-10**: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

### –ù–µ–¥–µ–ª—è 3 (–î–Ω–∏ 11-15): –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–î–µ–Ω—å 11-12**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- **–î–µ–Ω—å 13**: Type hints
- **–î–µ–Ω—å 14-15**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞

### –ù–µ–¥–µ–ª—è 4 (–î–Ω–∏ 16-20): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–î–µ–Ω—å 16-17**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
- **–î–µ–Ω—å 18-20**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

### –≠—Ç–∞–ø 1 - –ì–æ—Ç–æ–≤ –∫–æ–≥–¥–∞:
- [ ] –í—Å–µ –≥–æ–ª—ã–µ except –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ
- [ ] –í—Å–µ QThread –∫–ª–∞—Å—Å—ã –ø—Ä–æ—à–ª–∏ –∞—É–¥–∏—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [ ] –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –≠—Ç–∞–ø 2 - –ì–æ—Ç–æ–≤ –∫–æ–≥–¥–∞:
- [ ] –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∞
- [ ] Type hints –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞
- [ ] UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### –≠—Ç–∞–ø 3 - –ì–æ—Ç–æ–≤ –∫–æ–≥–¥–∞:
- [ ] –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–ø—Ä–æ—â–µ–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö API
- [ ] –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ —É–¥–∞–ª–µ–Ω
- [ ] –ò–º–ø–æ—Ä—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### –≠—Ç–∞–ø 4 - –ì–æ—Ç–æ–≤ –∫–æ–≥–¥–∞:
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç pre-commit hooks
- [ ] –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- [ ] –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

---

## üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞:
1. **–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã**: –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö workflow
3. **–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ UI –∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- [ ] –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- [ ] –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –†–∞–±–æ—Ç–∞ —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏
- [ ] –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–ì–æ–ª—ã–µ except –±–ª–æ–∫–∏**: 0 (—Ç–µ–∫—É—â–µ–µ: 50+)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º**: 95%+ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π**: 100% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç—Ä–æ–∫
- **–ü–æ–∫—Ä—ã—Ç–∏–µ type hints**: 80%+ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: 60%+ –∫–æ–¥–∞

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ < 5 —Å–µ–∫
- **Usability**: –í—Å–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- **Maintainability**: –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞

---

## üö® –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏:
1. **–†–µ–≥—Ä–µ—Å—Å–∏–∏ –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ except –±–ª–æ–∫–æ–≤**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å threading –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ –æ–¥–Ω–æ–º—É –∫–ª–∞—Å—Å—É

3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ UI**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞

### –°—Ä–µ–¥–Ω–∏–µ —Ä–∏—Å–∫–∏:
1. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑-–∑–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   
2. **–°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å type hints –≤ —Å–ª–æ–∂–Ω—ã—Ö —Ç–∏–ø–∞—Ö**
   - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –Ω–∞—á–∏–Ω–∞—è —Å –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≤—Å–µ—Ö –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π —Ä–∏—Å–∫–æ–≤ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∏–º–µ–µ—Ç —á–µ—Ç–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞.

**–ì–æ—Ç–æ–≤ –∫ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é –∏ –Ω–∞—á–∞–ª—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.**

---
*–ü–ª–∞–Ω —Å–æ–∑–¥–∞–Ω: 2024-12-19*  
*–í–µ—Ä—Å–∏—è: 1.0*  
*–°—Ç–∞—Ç—É—Å: –ù–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏* 